<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tree Traversal Visualization</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.8.5/d3.min.js"></script>
    <style>
        body, html {
            margin: 0;
            padding: 0;
            width: 100%;
            height: 100%;
            overflow: hidden;
        }
        #svg-container {
            width: 100%;
            height: 100%;
        }
    </style>
</head>
<body>
    <div id="svg-container"></div>

    <script>
        // SVG content
        const svgContent = `
        <g>
          <style>
            .node { fill: white; stroke: black; stroke-width: 2; }
            .text { font-family: Arial, sans-serif; font-size: 14px; text-anchor: middle; }
            .line { stroke: black; stroke-width: 2; }
            .arrow { fill: black; }
            .order { font-family: Arial, sans-serif; font-size: 12px; fill: red; }
            .title { font-family: Arial, sans-serif; font-size: 16px; font-weight: bold; }
            .explanation { font-family: Arial, sans-serif; font-size: 12px; }
          </style>
          
          <!-- 前序遍历 -->
          <g transform="translate(0,0)">
            <text x="200" y="30" class="title">前序遍历 (DFS)</text>
            <g transform="translate(200,80)">
              <!-- 树结构（与之前相同） -->
              <circle class="node" cx="0" cy="0" r="20" />
              <text class="text" x="0" y="5">A</text>
              <text class="order" x="15" y="-15">1</text>
              
              <circle class="node" cx="-100" cy="100" r="20" />
              <text class="text" x="-100" y="105">B</text>
              <text class="order" x="-85" y="85">2</text>
              
              <circle class="node" cx="100" cy="100" r="20" />
              <text class="text" x="100" y="105">C</text>
              <text class="order" x="115" y="85">5</text>
              
              <circle class="node" cx="-150" cy="200" r="20" />
              <text class="text" x="-150" y="205">D</text>
              <text class="order" x="-135" y="185">3</text>
              
              <circle class="node" cx="-50" cy="200" r="20" />
              <text class="text" x="-50" y="205">E</text>
              <text class="order" x="-35" y="185">4</text>
              
              <circle class="node" cx="50" cy="200" r="20" />
              <text class="text" x="50" y="205">F</text>
              <text class="order" x="65" y="185">6</text>
              
              <circle class="node" cx="150" cy="200" r="20" />
              <text class="text" x="150" y="205">G</text>
              <text class="order" x="165" y="185">7</text>
              
              <!-- 连线 -->
              <line class="line" x1="0" y1="20" x2="-90" y2="85" />
              <line class="line" x1="0" y1="20" x2="90" y2="85" />
              <line class="line" x1="-100" y1="120" x2="-140" y2="185" />
              <line class="line" x1="-100" y1="120" x2="-60" y2="185" />
              <line class="line" x1="100" y1="120" x2="60" y2="185" />
              <line class="line" x1="100" y1="120" x2="140" y2="185" />
            </g>
            <!-- 解释文本 -->
            <text x="20" y="320" class="explanation">遍历顺序：A → B → D → E → C → F → G</text>
            <text x="20" y="340" class="explanation">1. 访问根节点 A</text>
            <text x="20" y="360" class="explanation">2. 递归访问左子树：B → D → E</text>
            <text x="20" y="380" class="explanation">3. 递归访问右子树：C → F → G</text>
          </g>

          <!-- 中序遍历 -->
          <g transform="translate(400,0)">
            <text x="200" y="30" class="title">中序遍历 (DFS)</text>
            <g transform="translate(200,80)">
              <!-- 树结构（与之前相同） -->
              <circle class="node" cx="0" cy="0" r="20" />
              <text class="text" x="0" y="5">A</text>
              <text class="order" x="15" y="-15">4</text>
              
              <circle class="node" cx="-100" cy="100" r="20" />
              <text class="text" x="-100" y="105">B</text>
              <text class="order" x="-85" y="85">2</text>
              
              <circle class="node" cx="100" cy="100" r="20" />
              <text class="text" x="100" y="105">C</text>
              <text class="order" x="115" y="85">6</text>
              
              <circle class="node" cx="-150" cy="200" r="20" />
              <text class="text" x="-150" y="205">D</text>
              <text class="order" x="-135" y="185">1</text>
              
              <circle class="node" cx="-50" cy="200" r="20" />
              <text class="text" x="-50" y="205">E</text>
              <text class="order" x="-35" y="185">3</text>
              
              <circle class="node" cx="50" cy="200" r="20" />
              <text class="text" x="50" y="205">F</text>
              <text class="order" x="65" y="185">5</text>
              
              <circle class="node" cx="150" cy="200" r="20" />
              <text class="text" x="150" y="205">G</text>
              <text class="order" x="165" y="185">7</text>
              
              <!-- 连线 -->
              <line class="line" x1="0" y1="20" x2="-90" y2="85" />
              <line class="line" x1="0" y1="20" x2="90" y2="85" />
              <line class="line" x1="-100" y1="120" x2="-140" y2="185" />
              <line class="line" x1="-100" y1="120" x2="-60" y2="185" />
              <line class="line" x1="100" y1="120" x2="60" y2="185" />
              <line class="line" x1="100" y1="120" x2="140" y2="185" />
            </g>
            <!-- 解释文本 -->
            <text x="20" y="320" class="explanation">遍历顺序：D → B → E → A → F → C → G</text>
            <text x="20" y="340" class="explanation">1. 递归访问左子树：D → B → E</text>
            <text x="20" y="360" class="explanation">2. 访问根节点 A</text>
            <text x="20" y="380" class="explanation">3. 递归访问右子树：F → C → G</text>
          </g>

          <!-- 后序遍历 -->
          <g transform="translate(0,600)">
            <text x="200" y="30" class="title">后序遍历 (DFS)</text>
            <g transform="translate(200,80)">
              <!-- 树结构（与之前相同） -->
              <circle class="node" cx="0" cy="0" r="20" />
              <text class="text" x="0" y="5">A</text>
              <text class="order" x="15" y="-15">7</text>
              
              <circle class="node" cx="-100" cy="100" r="20" />
              <text class="text" x="-100" y="105">B</text>
              <text class="order" x="-85" y="85">3</text>
              
              <circle class="node" cx="100" cy="100" r="20" />
              <text class="text" x="100" y="105">C</text>
              <text class="order" x="115" y="85">6</text>
              
              <circle class="node" cx="-150" cy="200" r="20" />
              <text class="text" x="-150" y="205">D</text>
              <text class="order" x="-135" y="185">1</text>
              
              <circle class="node" cx="-50" cy="200" r="20" />
              <text class="text" x="-50" y="205">E</text>
              <text class="order" x="-35" y="185">2</text>
              
              <circle class="node" cx="50" cy="200" r="20" />
              <text class="text" x="50" y="205">F</text>
              <text class="order" x="65" y="185">4</text>
              
              <circle class="node" cx="150" cy="200" r="20" />
              <text class="text" x="150" y="205">G</text>
              <text class="order" x="165" y="185">5</text>
              
              <!-- 连线 -->
              <line class="line" x1="0" y1="20" x2="-90" y2="85" />
              <line class="line" x1="0" y1="20" x2="90" y2="85" />
              <line class="line" x1="-100" y1="120" x2="-140" y2="185" />
              <line class="line" x1="-100" y1="120" x2="-60" y2="185" />
              <line class="line" x1="100" y1="120" x2="60" y2="185" />
              <line class="line" x1="100" y1="120" x2="140" y2="185" />
            </g>
            <!-- 解释文本 -->
            <text x="20" y="320" class="explanation">遍历顺序：D → E → B → F → G → C → A</text>
            <text x="20" y="340" class="explanation">1. 递归访问左子树：D → E → B</text>
            <text x="20" y="360" class="explanation">2. 递归访问右子树：F → G → C</text>
            <text x="20" y="380" class="explanation">3. 访问根节点 A</text>
          </g>

          <!-- 广度优先遍历 -->
          <g transform="translate(400,600)">
            <text x="200" y="30" class="title">广度优先遍历 (BFS)</text>
            <g transform="translate(200,80)">
              <!-- 树结构（与之前相同） -->
              <circle class="node" cx="0" cy="0" r="20" />
              <text class="text" x="0" y="5">A</text>
              <text class="order" x="15" y="-15">1</text>
              
              <circle class="node" cx="-100" cy="100" r="20" />
              <text class="text" x="-100" y="105">B</text>
              <text class="order" x="-85" y="85">2</text>
              
              <circle class="node" cx="100" cy="100" r="20" />
              <text class="text" x="100" y="105">C</text>
              <text class="order" x="115" y="85">3</text>
              
              <circle class="node" cx="-150" cy="200" r="20" />
              <text class="text" x="-150" y="205">D</text>
              <text class="order" x="-135" y="185">4</text>
              
              <circle class="node" cx="-50" cy="200" r="20" />
              <text class="text" x="-50" y="205">E</text>
              <text class="order" x="-35" y="185">5</text>
              
              <circle class="node" cx="50" cy="200" r="20" />
              <text class="text" x="50" y="205">F</text>
              <text class="order" x="65" y="185">6</text>
              
              <circle class="node" cx="150" cy="200" r="20" />
              <text class="text" x="150" y="205">G</text>
              <text class="order" x="165" y="185">7</text>
              
              <!-- 连线 -->
              <line class="line" x1="0" y1="20" x2="-90" y2="85" />
              <line class="line" x1="0" y1="20" x2="90" y2="85" />
              <line class="line" x1="-100" y1="120" x2="-140" y2="185" />
              <line class="line" x1="-100" y1="120" x2="-60" y2="185" />
              <line class="line" x1="100" y1="120" x2="60" y2="185" />
              <line class="line" x1="100" y1="120" x2="140" y2="185" />
            </g>
            <!-- 解释文本 -->
            <text x="20" y="320" class="explanation">遍历顺序：A → B → C → D → E → F → G</text>
            <text x="20" y="340" class="explanation">1. 访问第一层：A</text>
            <text x="20" y="360" class="explanation">2. 访问第二层：B → C</text>
            <text x="20" y="380" class="explanation">3. 访问第三层：D → E → F → G</text>
          </g>
        </g>
        `;

    // Create SVG
    const container = d3.select("#svg-container");
        const svg = container.append("svg")
            .attr("width", "100%")
            .attr("height", "100%")
            .append("g");  // Add a group to apply zoom

        svg.html(svgContent);

        // Get the SVG element and its content
        const svgElement = container.select("svg").node();
        const content = svg.select("g").node();

        // Create zoom behavior
        const zoom = d3.zoom()
            .scaleExtent([0.1, 10])
            .on("zoom", (event) => {
                svg.attr("transform", event.transform);
            });

        // Apply zoom behavior to the SVG
        container.select("svg").call(zoom);

        // Center the SVG content initially
        function centerSVG() {
            const bbox = content.getBBox();
            const containerWidth = svgElement.clientWidth;
            const containerHeight = svgElement.clientHeight;
            
            const scale = Math.min(
                containerWidth / bbox.width,
                containerHeight / bbox.height
            ) * 0.9; // 90% of the max possible scale to leave some margin

            const tx = (containerWidth - bbox.width * scale) / 2 - bbox.x * scale;
            const ty = (containerHeight - bbox.height * scale) / 2 - bbox.y * scale;

            container.select("svg").call(
                zoom.transform,
                d3.zoomIdentity.translate(tx, ty).scale(scale)
            );
        }

        // Call centerSVG initially and on window resize
        centerSVG();
        window.addEventListener('resize', centerSVG);
    </script>
</body>
</html>
